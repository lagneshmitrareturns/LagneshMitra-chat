<!DOCTYPE html>
<html lang="en">
<head>
  <!-- BASIC META -->
  <meta charset="UTF-8">
  <title>LagneshMitra</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- MAIN STYLESHEET -->
  <link rel="stylesheet" href="style.css">

  <!-- LM INTRO -->
  <style>
    #lm-intro{
      position:fixed;
      inset:0;
      background:#160a26;
      z-index:99999;
      display:flex;
      align-items:center;
      justify-content:center;
      animation:lm-slide-up 5.5s ease forwards;
    }

    .lm-core{
      font-size:120px;
      font-weight:900;
      font-style:italic;
      color:#ff5da2;
      letter-spacing:10px;
      text-shadow:
        0 0 20px rgba(255,93,162,.8),
        0 0 50px rgba(124,58,237,.6);
    }

    @keyframes lm-slide-up{
      0% { transform:translateY(0); }
      85% { transform:translateY(0); }
      100% { transform:translateY(-110%); }
    }

    @media(max-width:600px){
      .lm-core{ font-size:80px; }
    }
  </style>
</head>

<body>

<!-- INTRO -->
<div id="lm-intro">
  <div class="lm-core">LM</div>
</div>

<!-- TOP BAR -->
<div class="topbar">
  <div class="brand">
    LagneshMitra
    <span>Astrology â€¢ Decision Intelligence</span>
  </div>

  <!-- DESKTOP ACTIONS -->
  <div class="top-actions">
    <button onclick="location.href='email-chat.html'">Contact</button>
    <button onclick="location.href='admin-posts.html'">Admin</button>
  </div>

  <!-- MOBILE MENU -->
  <div class="menu" onclick="toggleMenu()">â‹®
    <div class="dropdown" id="mainMenu">
      <button onclick="location.href='email-chat.html'">ðŸ“© Contact</button>
      <button onclick="location.href='admin-posts.html'">âš™ Admin</button>
    </div>
  </div>
</div>

<!-- HALL OF FAME -->
<div class="hero">
  <div class="post-card" id="postCard">
    <h3>Hall of Fame</h3>

    <div class="meta" id="postMeta">
      Loading latest transmissionâ€¦
    </div>

    <div class="post-preview" id="postPreview"></div>
    <div class="post-full" id="postFull"></div>

    <button id="toggleBtn">Expand</button>
  </div>
</div>

<!-- CORE LOGIC -->
<script type="module" src="app.js"></script>

<script>
/* ===== INTRO LOCK ===== */
document.body.style.pointerEvents = "none";
document.body.style.paddingTop = "0px";

(function(){
  const intro = document.getElementById("lm-intro");

  if(sessionStorage.getItem("lm_intro_seen")){
    intro.remove();
    document.body.style.pointerEvents = "auto";
    document.body.style.paddingTop = "140px";
    return;
  }

  sessionStorage.setItem("lm_intro_seen","1");

  setTimeout(()=>{
    intro.remove();
    document.body.style.pointerEvents = "auto";
    document.body.style.paddingTop = "140px";
  },5500);
})();

/* ===== MENU ===== */
function toggleMenu(){
  const m = document.getElementById("mainMenu");
  m.style.display = (m.style.display === "block") ? "none" : "block";
}

document.addEventListener("click",e=>{
  if(!e.target.closest(".menu")){
    const m = document.getElementById("mainMenu");
    if(m) m.style.display="none";
  }
});

/* ===== HALL OF FAME FALLBACK + TOGGLE ===== */
document.addEventListener("DOMContentLoaded", () => {
  const meta = document.getElementById("postMeta");
  const preview = document.getElementById("postPreview");
  const full = document.getElementById("postFull");
  const btn = document.getElementById("toggleBtn");
  const card = document.getElementById("postCard");

  // ðŸ”’ SAFETY FALLBACK (if app.js fails)
  if (!preview.innerHTML.trim()) {
    meta.textContent = "Featured Insight";
    preview.innerHTML = `
      True predictions are not guesses.
      They are outcomes of structure, timing, and karmic sequence.
    `;
    full.innerHTML = `
      Astrology works when prediction is treated as decision intelligence,
      not belief. Lagna strength, dasha timing, and transit triggers
      together decide manifestation â€” not hope.
    `;
  }

  btn.addEventListener("click", () => {
    card.classList.toggle("expanded");
    btn.textContent = card.classList.contains("expanded") ? "Collapse" : "Expand";
  });
});
</script>

</body>
</html>
